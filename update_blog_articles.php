<?php

/**
 * Update Blog Articles - Delete old articles and create new ones for each service
 * تحديث مقالات المدونة - حذف المقالات القديمة وإنشاء مقالات جديدة لكل خدمة
 */

require __DIR__ . '/vendor/autoload.php';

$app = require_once __DIR__ . '/bootstrap/app.php';
$app->make('Illuminate\Contracts\Console\Kernel')->bootstrap();

use Modules\Blog\app\Models\Blog;
use Modules\Blog\app\Models\BlogTranslation;
use Modules\Blog\app\Models\BlogCategory;
use Modules\Service\app\Models\Service;
use Modules\Language\app\Models\Language;
use App\Models\Admin;
use Illuminate\Support\Str;
use Illuminate\Support\Facades\File;

try {
    echo "========================================\n";
    echo "تحديث مقالات المدونة - إنشاء مقالات للخدمات\n";
    echo "========================================\n\n";

    // الحصول على اللغة العربية
    $arabicLang = Language::where('code', 'ar')->first();
    if (!$arabicLang) {
        throw new Exception("اللغة العربية غير موجودة في قاعدة البيانات");
    }
    echo "✓ تم العثور على اللغة العربية\n\n";

    // الحصول على أول مدير (Admin)
    $admin = Admin::first();
    if (!$admin) {
        throw new Exception("لا يوجد مدير في النظام");
    }
    echo "✓ تم العثور على المدير: {$admin->name}\n\n";

    // الحصول على أول فئة للمدونة أو إنشاؤها
    $category = BlogCategory::first();
    if (!$category) {
        $category = BlogCategory::create([
            'status' => 1,
        ]);
        // إنشاء ترجمة عربية للفئة
        $category->translations()->create([
            'lang_code' => 'ar',
            'title' => 'المقالات القانونية',
            'description' => 'مقالات قانونية متنوعة',
        ]);
        echo "✓ تم إنشاء فئة جديدة للمدونة\n\n";
    } else {
        echo "✓ تم العثور على فئة المدونة\n\n";
    }

    // حذف جميع المقالات القديمة
    echo "========================================\n";
    echo "حذف المقالات القديمة\n";
    echo "========================================\n";
    
    $oldBlogs = Blog::all();
    $deletedCount = 0;
    
    foreach ($oldBlogs as $blog) {
        // حذف الصور
        if ($blog->image && File::exists(public_path($blog->image))) {
            File::delete(public_path($blog->image));
        }
        if ($blog->thumbnail_image && File::exists(public_path($blog->thumbnail_image))) {
            File::delete(public_path($blog->thumbnail_image));
        }
        
        // حذف الترجمات
        $blog->translations()->delete();
        
        // حذف المقال
        $blog->delete();
        $deletedCount++;
    }
    
    echo "✓ تم حذف {$deletedCount} مقالة قديمة\n\n";

    // الحصول على جميع الخدمات النشطة
    echo "========================================\n";
    echo "الحصول على الخدمات\n";
    echo "========================================\n";
    
    $services = Service::with(['translations' => function($q) {
        $q->where('lang_code', 'ar');
    }])->active()->get();
    
    if ($services->isEmpty()) {
        throw new Exception("لا توجد خدمات نشطة في النظام");
    }
    
    echo "✓ تم العثور على {$services->count()} خدمة نشطة\n\n";

    // محتوى المقالات لكل خدمة
    $articlesContent = [
        'الاستشارات القانونية' => [
            'title' => 'الاستشارات القانونية في سوريا: دليل شامل',
            'sort_description' => 'تعرف على أهمية الاستشارات القانونية في سوريا، وكيف يمكن أن تساعدك في اتخاذ القرارات الصحيحة وحماية حقوقك القانونية.',
            'description' => '<p>الاستشارات القانونية في سوريا تعد من أهم الخدمات القانونية التي يحتاجها الأفراد والشركات. الاستشارة القانونية الصحيحة يمكن أن توفر عليك الكثير من الوقت والجهد والمال.</p>

<h3>ما هي الاستشارات القانونية؟</h3>
<p>الاستشارات القانونية هي عملية الحصول على رأي قانوني متخصص حول قضية أو مسألة قانونية معينة. المحامي المتخصص يقوم بتحليل الوضع القانوني وإعطاء النصح والإرشاد المناسب.</p>

<h3>متى تحتاج استشارة قانونية؟</h3>
<p>يجب عليك الحصول على استشارة قانونية في الحالات التالية:</p>
<ul>
<li>قبل توقيع أي عقد مهم</li>
<li>عند بدء عمل تجاري جديد</li>
<li>عند مواجهة نزاع قانوني</li>
<li>عند الحاجة لفهم حقوقك وواجباتك القانونية</li>
<li>عند التعامل مع قضايا معقدة قانونياً</li>
</ul>

<h3>فوائد الاستشارات القانونية</h3>
<p>الاستشارات القانونية توفر لك:</p>
<ul>
<li>فهم واضح لحقوقك وواجباتك</li>
<li>تجنب المشاكل القانونية المستقبلية</li>
<li>اتخاذ قرارات قانونية صحيحة</li>
<li>توفير الوقت والمال</li>
<li>حماية مصالحك القانونية</li>
</ul>

<h3>خدماتنا في الاستشارات القانونية</h3>
<p>نقدم في مكتبنا استشارات قانونية شاملة في جميع المجالات القانونية في سوريا. فريقنا القانوني المتخصص جاهز لتقديم النصح والإرشاد القانوني المناسب لجميع قضاياك.</p>'
        ],
        'صياغة العقود' => [
            'title' => 'صياغة العقود في سوريا: دليل شامل',
            'sort_description' => 'تعرف على أهمية صياغة العقود بشكل صحيح في سوريا، وكيف يمكن أن يحميك عقد قانوني محكم من المشاكل المستقبلية.',
            'description' => '<p>صياغة العقود في سوريا تحتاج إلى خبرة قانونية واسعة ومعرفة دقيقة بالقوانين السورية. العقد القانوني المحكم يمكن أن يحميك من النزاعات والمشاكل المستقبلية.</p>

<h3>ما هي صياغة العقود؟</h3>
<p>صياغة العقود هي عملية كتابة عقد قانوني يحدد حقوق وواجبات جميع الأطراف بشكل واضح ومفصل. العقد الجيد يجب أن يكون واضحاً، شاملاً، ومتوافقاً مع القوانين السورية.</p>

<h3>أنواع العقود التي نقدمها</h3>
<p>نقدم خدمات صياغة العقود في جميع المجالات:</p>
<ul>
<li>عقود العمل</li>
<li>عقود البيع والشراء</li>
<li>عقود الإيجار</li>
<li>عقود الشراكة</li>
<li>عقود الخدمات</li>
<li>العقود التجارية</li>
</ul>

<h3>لماذا تحتاج محامٍ لصياغة العقود؟</h3>
<p>المحامي المتخصص يمكنه:</p>
<ul>
<li>ضمان توافق العقد مع القوانين السورية</li>
<li>حماية حقوقك في العقد</li>
<li>تجنب الثغرات القانونية</li>
<li>إضافة شروط حماية مناسبة</li>
<li>ضمان وضوح جميع البنود</li>
</ul>

<h3>خدماتنا</h3>
<p>نقدم في مكتبنا خدمات صياغة العقود الشاملة، مع ضمان أن جميع العقود متوافقة مع القوانين السورية وتحمي مصالحك بشكل كامل.</p>'
        ],
        'التمثيل في المحاكم' => [
            'title' => 'التمثيل في المحاكم في سوريا: دليل شامل',
            'sort_description' => 'تعرف على أهمية التمثيل القانوني في المحاكم السورية، وكيف يمكن أن يساعدك محامٍ متخصص في الحصول على حقوقك.',
            'description' => '<p>التمثيل في المحاكم في سوريا يحتاج إلى محامٍ متخصص لديه خبرة واسعة في النظام القضائي السوري. المحامي الجيد يمكن أن يحدث فرقاً كبيراً في نتيجة قضيتك.</p>

<h3>ما هو التمثيل في المحاكم؟</h3>
<p>التمثيل في المحاكم يعني أن المحامي يتولى تمثيلك أمام المحاكم والجهات القضائية. المحامي يقوم بإعداد القضية، تقديم الأدلة، والدفاع عن حقوقك.</p>

<h3>متى تحتاج تمثيل قانوني؟</h3>
<p>يجب عليك الحصول على تمثيل قانوني في الحالات التالية:</p>
<ul>
<li>عند رفع دعوى قضائية</li>
<li>عند استدعائك للمحكمة</li>
<li>عند مواجهة اتهام</li>
<li>عند الحاجة للدفاع عن حقوقك</li>
<li>عند التعامل مع قضايا معقدة</li>
</ul>

<h3>فوائد التمثيل القانوني</h3>
<p>التمثيل القانوني المتخصص يوفر لك:</p>
<ul>
<li>خبرة قانونية واسعة</li>
<li>إعداد قوي للقضية</li>
<li>تمثيل فعال أمام المحاكم</li>
<li>زيادة فرص النجاح</li>
<li>حماية حقوقك بشكل كامل</li>
</ul>

<h3>خدماتنا</h3>
<p>نقدم في مكتبنا خدمات التمثيل القانوني الشاملة في جميع المحاكم السورية. فريقنا القانوني المتخصص جاهز لتمثيلك والدفاع عن حقوقك.</p>'
        ],
        'تسجيل الشركات' => [
            'title' => 'تسجيل الشركات في سوريا: دليل شامل',
            'sort_description' => 'تعرف على إجراءات تسجيل الشركات في سوريا، وكيف يمكن أن يساعدك محامٍ متخصص في إنشاء شركتك بشكل قانوني صحيح.',
            'description' => '<p>تسجيل الشركات في سوريا يحتاج إلى إجراءات قانونية معقدة ومستندات متعددة. المحامي المتخصص يمكن أن يسهل عليك هذه العملية ويضمن أن شركتك مسجلة بشكل قانوني صحيح.</p>

<h3>ما هو تسجيل الشركات؟</h3>
<p>تسجيل الشركات هو عملية إنشاء شركة قانونية في سوريا وفقاً للقوانين والأنظمة السورية. التسجيل الصحيح يضمن أن شركتك قانونية ويمكنها ممارسة الأعمال بشكل قانوني.</p>

<h3>أنواع الشركات في سوريا</h3>
<p>يمكن تسجيل أنواع مختلفة من الشركات في سوريا:</p>
<ul>
<li>شركات التضامن</li>
<li>شركات التوصية</li>
<li>الشركات المساهمة</li>
<li>شركات ذات مسؤولية محدودة</li>
<li>الشركات الفردية</li>
</ul>

<h3>إجراءات تسجيل الشركات</h3>
<p>تسجيل الشركة يتطلب:</p>
<ul>
<li>اختيار اسم الشركة</li>
<li>تحديد نوع الشركة</li>
<li>إعداد النظام الأساسي</li>
<li>تسجيل رأس المال</li>
<li>الحصول على التراخيص اللازمة</li>
</ul>

<h3>خدماتنا</h3>
<p>نقدم في مكتبنا خدمات تسجيل الشركات الشاملة، من بداية الإجراءات حتى الحصول على جميع التراخيص والتصاريح اللازمة.</p>'
        ],
        'حل النزاعات' => [
            'title' => 'حل النزاعات في سوريا: دليل شامل',
            'sort_description' => 'تعرف على طرق حل النزاعات في سوريا، وكيف يمكن أن يساعدك محامٍ متخصص في حل نزاعاتك بشكل سلمي وفعال.',
            'description' => '<p>حل النزاعات في سوريا يمكن أن يتم بعدة طرق، من التفاوض المباشر إلى التحكيم والمحاكم. المحامي المتخصص يمكن أن يساعدك في اختيار أفضل طريقة لحل نزاعك.</p>

<h3>ما هي طرق حل النزاعات؟</h3>
<p>هناك عدة طرق لحل النزاعات في سوريا:</p>
<ul>
<li>التفاوض المباشر</li>
<li>الوساطة</li>
<li>التحكيم</li>
<li>المحاكم</li>
</ul>

<h3>متى تحتاج محامٍ لحل النزاعات؟</h3>
<p>يجب عليك استشارة محامٍ في الحالات التالية:</p>
<ul>
<li>عند وجود نزاع قانوني</li>
<li>عند فشل التفاوض المباشر</li>
<li>عند الحاجة لوساطة قانونية</li>
<li>عند الحاجة للتحكيم</li>
<li>عند الحاجة لرفع دعوى قضائية</li>
</ul>

<h3>فوائد حل النزاعات بشكل قانوني</h3>
<p>حل النزاعات بشكل قانوني يوفر:</p>
<ul>
<li>حل سريع وفعال</li>
<li>توفير الوقت والمال</li>
<li>حماية حقوقك</li>
<li>تجنب التعقيدات القانونية</li>
<li>نتائج عادلة ومتوازنة</li>
</ul>

<h3>خدماتنا</h3>
<p>نقدم في مكتبنا خدمات حل النزاعات الشاملة، من التفاوض والوساطة إلى التحكيم والتمثيل في المحاكم.</p>'
        ],
        'التحكيم' => [
            'title' => 'التحكيم في سوريا: دليل شامل',
            'sort_description' => 'تعرف على نظام التحكيم في سوريا، وكيف يمكن أن يكون بديلاً فعالاً للمحاكم في حل النزاعات التجارية والقانونية.',
            'description' => '<p>التحكيم في سوريا هو طريقة بديلة لحل النزاعات دون اللجوء للمحاكم. التحكيم يمكن أن يكون أسرع وأقل تكلفة من المحاكم التقليدية.</p>

<h3>ما هو التحكيم؟</h3>
<p>التحكيم هو عملية حل النزاعات من خلال محكم محايد بدلاً من المحاكم. المحكم يقوم بسماع جميع الأطراف واتخاذ قرار ملزم.</p>

<h3>متى تستخدم التحكيم؟</h3>
<p>التحكيم مناسب في الحالات التالية:</p>
<ul>
<li>النزاعات التجارية</li>
<li>نزاعات العقود</li>
<li>النزاعات التجارية الدولية</li>
<li>عند الرغبة في حل سريع</li>
<li>عند الحاجة للسرية</li>
</ul>

<h3>فوائد التحكيم</h3>
<p>التحكيم يوفر عدة فوائد:</p>
<ul>
<li>سرعة في الحل</li>
<li>تكلفة أقل من المحاكم</li>
<li>مرونة في الإجراءات</li>
<li>سرية أكبر</li>
<li>خبرة متخصصة</li>
</ul>

<h3>خدماتنا</h3>
<p>نقدم في مكتبنا خدمات التحكيم الشاملة، من إعداد اتفاقيات التحكيم إلى تمثيلك في جلسات التحكيم.</p>'
        ],
        'التوثيق القانوني' => [
            'title' => 'التوثيق القانوني في سوريا: دليل شامل',
            'sort_description' => 'تعرف على أهمية التوثيق القانوني في سوريا، وكيف يمكن أن يحميك التوثيق الصحيح من المشاكل القانونية المستقبلية.',
            'description' => '<p>التوثيق القانوني في سوريا هو عملية توثيق جميع المعاملات والاتفاقيات بشكل قانوني. التوثيق الصحيح يمكن أن يحميك من النزاعات والمشاكل المستقبلية.</p>

<h3>ما هو التوثيق القانوني؟</h3>
<p>التوثيق القانوني هو عملية توثيق جميع المعاملات والاتفاقيات بشكل رسمي وقانوني. هذا يشمل توثيق العقود، الاتفاقيات، والمعاملات المختلفة.</p>

<h3>أنواع التوثيق القانوني</h3>
<p>نقدم خدمات التوثيق في:</p>
<ul>
<li>توثيق العقود</li>
<li>توثيق الاتفاقيات</li>
<li>توثيق المعاملات التجارية</li>
<li>توثيق الملكية</li>
<li>توثيق الوصايا</li>
</ul>

<h3>لماذا تحتاج التوثيق القانوني؟</h3>
<p>التوثيق القانوني يوفر:</p>
<ul>
<li>حماية قانونية كاملة</li>
<li>إثبات الحقوق</li>
<li>تجنب النزاعات</li>
<li>وثائق رسمية معترف بها</li>
<li>حماية من التزوير</li>
</ul>

<h3>خدماتنا</h3>
<p>نقدم في مكتبنا خدمات التوثيق القانوني الشاملة، مع ضمان أن جميع الوثائق متوافقة مع القوانين السورية ومعترف بها رسمياً.</p>'
        ],
        'القانون المدني والتجاري' => [
            'title' => 'القانون المدني والتجاري في سوريا: دليل شامل',
            'sort_description' => 'تعرف على أهم جوانب القانون المدني والتجاري في سوريا، وكيف يمكن أن يساعدك محامٍ متخصص في حماية حقوقك التجارية والمدنية.',
            'description' => '<p>القانون المدني والتجاري في سوريا يشكل الأساس القانوني لجميع المعاملات التجارية والمدنية. يتضمن هذا القانون مجموعة واسعة من القواعد التي تحكم العلاقات بين الأفراد والشركات.</p>

<h3>ما هو القانون المدني والتجاري؟</h3>
<p>القانون المدني والتجاري في سوريا يغطي العديد من المجالات المهمة مثل:</p>
<ul>
<li>العقود التجارية والمدنية</li>
<li>حقوق الملكية الفكرية</li>
<li>قانون الشركات</li>
<li>المنازعات التجارية</li>
<li>الالتزامات والعقود</li>
</ul>

<h3>لماذا تحتاج محامٍ متخصص؟</h3>
<p>المحامي المتخصص في القانون المدني والتجاري يمكنه مساعدتك في:</p>
<ul>
<li>صياغة العقود التجارية بشكل صحيح</li>
<li>حماية حقوقك في المنازعات التجارية</li>
<li>استشارات قانونية حول المعاملات التجارية</li>
<li>تمثيلك أمام المحاكم في القضايا المدنية والتجارية</li>
</ul>

<h3>الخدمات التي نقدمها</h3>
<p>نقدم في مكتبنا خدمات قانونية شاملة في مجال القانون المدني والتجاري، بما في ذلك الاستشارات القانونية، صياغة العقود، والتمثيل القانوني في المحاكم.</p>'
        ],
        'قانون الأحوال الشخصية والأسرة' => [
            'title' => 'قانون الأحوال الشخصية والأسرة في سوريا',
            'sort_description' => 'دليل شامل حول قانون الأحوال الشخصية والأسرة في سوريا، وكيف يمكن أن يساعدك محامٍ متخصص في قضايا الطلاق، الميراث، والوصاية.',
            'description' => '<p>قانون الأحوال الشخصية والأسرة في سوريا يحكم جميع الأمور المتعلقة بالأسرة والعلاقات الشخصية. هذا القانون مهم جداً لأنه يتعامل مع القضايا الحساسة التي تؤثر على حياة الأفراد والأسر.</p>

<h3>مجالات قانون الأحوال الشخصية</h3>
<p>يغطي قانون الأحوال الشخصية في سوريا:</p>
<ul>
<li>الزواج والطلاق</li>
<li>الميراث والوصية</li>
<li>الوصاية على القاصرين</li>
<li>النفقة والحضانة</li>
<li>الطلاق والخلع</li>
</ul>

<h3>كيف يمكننا مساعدتك؟</h3>
<p>فريقنا القانوني المتخصص يمكنه مساعدتك في:</p>
<ul>
<li>إجراءات الطلاق والخلع</li>
<li>قضايا الميراث وتقسيم التركة</li>
<li>قضايا النفقة والحضانة</li>
<li>الوصاية على القاصرين</li>
<li>الاستشارات القانونية العائلية</li>
</ul>

<h3>لماذا نحن؟</h3>
<p>نحن نتمتع بخبرة واسعة في التعامل مع قضايا الأحوال الشخصية في سوريا، ونقدم خدمات قانونية شاملة مع الحفاظ على السرية والخصوصية التامة.</p>'
        ],
        'القانون الجنائي' => [
            'title' => 'القانون الجنائي في سوريا: الدفاع عن حقوقك',
            'sort_description' => 'تعرف على أهمية الدفاع الجنائي في سوريا، وكيف يمكن أن يحميك محامٍ متخصص من التهم الجنائية ويضمن لك محاكمة عادلة.',
            'description' => '<p>القانون الجنائي في سوريا يحكم الجرائم والعقوبات. إذا كنت متهمًا بجريمة أو ضحية لجريمة، فأنت بحاجة إلى محامٍ جنائي متخصص لحماية حقوقك.</p>

<h3>ما هو القانون الجنائي؟</h3>
<p>القانون الجنائي في سوريا يتعامل مع:</p>
<ul>
<li>الجرائم والعقوبات</li>
<li>حقوق المتهمين</li>
<li>حقوق الضحايا</li>
<li>إجراءات المحاكمة</li>
<li>الاستئناف والعفو</li>
</ul>

<h3>متى تحتاج محامٍ جنائي؟</h3>
<p>يجب عليك استشارة محامٍ جنائي في الحالات التالية:</p>
<ul>
<li>إذا تم اتهامك بجريمة</li>
<li>إذا كنت ضحية لجريمة</li>
<li>إذا تم استدعاؤك للتحقيق</li>
<li>إذا كنت بحاجة إلى استشارة قانونية جنائية</li>
</ul>

<h3>خدماتنا في القانون الجنائي</h3>
<p>نقدم خدمات قانونية شاملة في مجال القانون الجنائي، بما في ذلك الدفاع عن المتهمين، تمثيل الضحايا، والاستشارات القانونية الجنائية.</p>'
        ],
        'قانون العقارات والملكية' => [
            'title' => 'قانون العقارات والملكية في سوريا',
            'sort_description' => 'دليل شامل حول قانون العقارات والملكية في سوريا، وكيف يمكن أن يساعدك محامٍ متخصص في شراء، بيع، أو تأجير العقارات.',
            'description' => '<p>قانون العقارات والملكية في سوريا يحكم جميع المعاملات المتعلقة بالعقارات. سواء كنت تريد شراء، بيع، أو تأجير عقار، فأنت بحاجة إلى محامٍ متخصص لحماية مصالحك.</p>

<h3>مجالات قانون العقارات</h3>
<p>يغطي قانون العقارات في سوريا:</p>
<ul>
<li>شراء وبيع العقارات</li>
<li>عقود الإيجار</li>
<li>تسجيل الملكية</li>
<li>المنازعات العقارية</li>
<li>التعويضات العقارية</li>
</ul>

<h3>كيف يمكننا مساعدتك؟</h3>
<p>فريقنا القانوني يمكنه مساعدتك في:</p>
<ul>
<li>مراجعة عقود البيع والشراء</li>
<li>صياغة عقود الإيجار</li>
<li>تسجيل الملكية العقارية</li>
<li>حل المنازعات العقارية</li>
<li>الاستشارات العقارية</li>
</ul>

<h3>لماذا نحن؟</h3>
<p>نحن نتمتع بخبرة واسعة في التعامل مع القضايا العقارية في سوريا، ونضمن لك حماية كاملة لحقوقك العقارية.</p>'
        ],
        'قانون العمل والتوظيف' => [
            'title' => 'قانون العمل والتوظيف في سوريا',
            'sort_description' => 'تعرف على حقوقك وواجباتك في قانون العمل السوري، وكيف يمكن أن يساعدك محامٍ متخصص في حماية حقوقك كموظف أو صاحب عمل.',
            'description' => '<p>قانون العمل والتوظيف في سوريا يحكم العلاقة بين أصحاب العمل والموظفين. سواء كنت موظفاً أو صاحب عمل، فأنت بحاجة إلى فهم قانون العمل لحماية حقوقك.</p>

<h3>ما هو قانون العمل؟</h3>
<p>قانون العمل في سوريا يغطي:</p>
<ul>
<li>عقود العمل</li>
<li>حقوق وواجبات الموظفين</li>
<li>حقوق وواجبات أصحاب العمل</li>
<li>إنهاء عقد العمل</li>
<li>التعويضات والمستحقات</li>
</ul>

<h3>متى تحتاج محامٍ في قانون العمل؟</h3>
<p>يجب عليك استشارة محامٍ في الحالات التالية:</p>
<ul>
<li>إذا تم إنهاء عقد عملك بشكل غير قانوني</li>
<li>إذا لم تحصل على مستحقاتك</li>
<li>إذا واجهت تمييزاً في العمل</li>
<li>إذا كنت بحاجة إلى استشارة حول عقد العمل</li>
</ul>

<h3>خدماتنا</h3>
<p>نقدم خدمات قانونية شاملة في مجال قانون العمل، بما في ذلك تمثيل الموظفين وأصحاب العمل، والاستشارات القانونية في قضايا العمل.</p>'
        ],
        'القانون الإداري' => [
            'title' => 'القانون الإداري في سوريا',
            'sort_description' => 'دليل شامل حول القانون الإداري في سوريا، وكيف يمكن أن يساعدك محامٍ متخصص في التعامل مع الجهات الحكومية والمنازعات الإدارية.',
            'description' => '<p>القانون الإداري في سوريا يحكم العلاقة بين الأفراد والجهات الحكومية. إذا كنت تتعامل مع جهة حكومية أو تواجه منازعة إدارية، فأنت بحاجة إلى محامٍ متخصص.</p>

<h3>مجالات القانون الإداري</h3>
<p>يغطي القانون الإداري في سوريا:</p>
<ul>
<li>التراخيص والتصاريح</li>
<li>المنازعات الإدارية</li>
<li>القرارات الإدارية</li>
<li>التعويضات الإدارية</li>
<li>القضايا الضريبية</li>
</ul>

<h3>كيف يمكننا مساعدتك؟</h3>
<p>فريقنا القانوني يمكنه مساعدتك في:</p>
<ul>
<li>الحصول على التراخيص والتصاريح</li>
<li>الطعن في القرارات الإدارية</li>
<li>حل المنازعات الإدارية</li>
<li>الاستشارات الإدارية</li>
<li>القضايا الضريبية</li>
</ul>

<h3>لماذا نحن؟</h3>
<p>نحن نتمتع بخبرة واسعة في التعامل مع الجهات الحكومية في سوريا، ونضمن لك الحصول على حقوقك الإدارية.</p>'
        ],
        'القانون التجاري' => [
            'title' => 'القانون التجاري في سوريا',
            'sort_description' => 'تعرف على القانون التجاري في سوريا، وكيف يمكن أن يساعدك محامٍ متخصص في إدارة أعمالك التجارية وحماية مصالحك التجارية.',
            'description' => '<p>القانون التجاري في سوريا يحكم جميع المعاملات التجارية والأنشطة التجارية. سواء كنت تريد إنشاء شركة أو إدارة أعمال تجارية، فأنت بحاجة إلى محامٍ متخصص.</p>

<h3>مجالات القانون التجاري</h3>
<p>يغطي القانون التجاري في سوريا:</p>
<ul>
<li>إنشاء الشركات</li>
<li>العقود التجارية</li>
<li>المنازعات التجارية</li>
<li>الإفلاس والتسوية</li>
<li>حقوق الملكية الفكرية</li>
</ul>

<h3>كيف يمكننا مساعدتك؟</h3>
<p>فريقنا القانوني يمكنه مساعدتك في:</p>
<ul>
<li>إنشاء وتسجيل الشركات</li>
<li>صياغة العقود التجارية</li>
<li>حل المنازعات التجارية</li>
<li>الاستشارات التجارية</li>
<li>حماية الملكية الفكرية</li>
</ul>

<h3>لماذا نحن؟</h3>
<p>نحن نتمتع بخبرة واسعة في القانون التجاري السوري، ونضمن لك حماية كاملة لمصالحك التجارية.</p>'
        ],
        'القانون العقاري' => [
            'title' => 'القانون العقاري في سوريا: دليل شامل',
            'sort_description' => 'دليل شامل حول القانون العقاري في سوريا، وكيف يمكن أن يساعدك محامٍ متخصص في جميع المعاملات العقارية.',
            'description' => '<p>القانون العقاري في سوريا يحكم جميع المعاملات المتعلقة بالعقارات. سواء كنت تريد شراء، بيع، أو تأجير عقار، فأنت بحاجة إلى محامٍ متخصص.</p>

<h3>ما هو القانون العقاري؟</h3>
<p>القانون العقاري في سوريا يغطي:</p>
<ul>
<li>شراء وبيع العقارات</li>
<li>عقود الإيجار</li>
<li>تسجيل الملكية</li>
<li>المنازعات العقارية</li>
<li>التعويضات العقارية</li>
</ul>

<h3>لماذا تحتاج محامٍ عقاري؟</h3>
<p>المحامي المتخصص في القانون العقاري يمكنه مساعدتك في:</p>
<ul>
<li>مراجعة عقود البيع والشراء</li>
<li>صياغة عقود الإيجار</li>
<li>تسجيل الملكية العقارية</li>
<li>حل المنازعات العقارية</li>
<li>الاستشارات العقارية</li>
</ul>

<h3>خدماتنا</h3>
<p>نقدم خدمات قانونية شاملة في مجال القانون العقاري، بما في ذلك الاستشارات العقارية، صياغة العقود، والتمثيل القانوني في المنازعات العقارية.</p>'
        ],
        'القانون الضريبي' => [
            'title' => 'القانون الضريبي في سوريا',
            'sort_description' => 'تعرف على القانون الضريبي في سوريا، وكيف يمكن أن يساعدك محامٍ متخصص في التعامل مع القضايا الضريبية والالتزامات الضريبية.',
            'description' => '<p>القانون الضريبي في سوريا يحكم جميع الأمور المتعلقة بالضرائب والالتزامات الضريبية. سواء كنت فرداً أو شركة، فأنت بحاجة إلى فهم القانون الضريبي.</p>

<h3>مجالات القانون الضريبي</h3>
<p>يغطي القانون الضريبي في سوريا:</p>
<ul>
<li>الضرائب على الدخل</li>
<li>الضرائب على المبيعات</li>
<li>الضرائب العقارية</li>
<li>المنازعات الضريبية</li>
<li>الالتزامات الضريبية</li>
</ul>

<h3>كيف يمكننا مساعدتك؟</h3>
<p>فريقنا القانوني يمكنه مساعدتك في:</p>
<ul>
<li>إعداد الإقرارات الضريبية</li>
<li>حل المنازعات الضريبية</li>
<li>الاستشارات الضريبية</li>
<li>التمثيل أمام الجهات الضريبية</li>
<li>التخطيط الضريبي</li>
</ul>

<h3>لماذا نحن؟</h3>
<p>نحن نتمتع بخبرة واسعة في القانون الضريبي السوري، ونضمن لك الالتزام الكامل بالأنظمة الضريبية.</p>'
        ],
    ];

    // إنشاء مقال لكل خدمة
    echo "========================================\n";
    echo "إنشاء المقالات الجديدة\n";
    echo "========================================\n";
    
    $createdCount = 0;
    
    foreach ($services as $service) {
        $serviceTitle = $service->translations->first()->title ?? $service->slug;
        
        // البحث عن محتوى المقال للخدمة
        $articleContent = null;
        foreach ($articlesContent as $key => $content) {
            if (str_contains($serviceTitle, $key) || str_contains($key, $serviceTitle)) {
                $articleContent = $content;
                break;
            }
        }
        
        // إذا لم يتم العثور على محتوى محدد، استخدم محتوى عام
        if (!$articleContent) {
            $articleContent = [
                'title' => "{$serviceTitle} في سوريا: دليل شامل",
                'sort_description' => "تعرف على {$serviceTitle} في سوريا، وكيف يمكن أن يساعدك محامٍ متخصص في حماية حقوقك ومصالحك.",
                'description' => "<p>{$serviceTitle} في سوريا يعد من المجالات القانونية المهمة التي تحتاج إلى فهم عميق وخبرة قانونية واسعة.</p>

<h3>ما هي {$serviceTitle}؟</h3>
<p>{$serviceTitle} يغطي العديد من الجوانب القانونية المهمة التي تؤثر على حياة الأفراد والشركات في سوريا.</p>

<h3>لماذا تحتاج محامٍ متخصص؟</h3>
<p>المحامي المتخصص في {$serviceTitle} يمكنه مساعدتك في:</p>
<ul>
<li>فهم حقوقك وواجباتك القانونية</li>
<li>الاستشارات القانونية المتخصصة</li>
<li>تمثيلك في القضايا القانونية</li>
<li>حماية مصالحك القانونية</li>
</ul>

<h3>خدماتنا</h3>
<p>نقدم في مكتبنا خدمات قانونية شاملة في مجال {$serviceTitle}، بما في ذلك الاستشارات القانونية، والتمثيل القانوني في المحاكم.</p>"
            ];
        }
        
        // إنشاء slug فريد
        $slug = Str::slug($articleContent['title']);
        $baseSlug = $slug;
        $counter = 1;
        while (Blog::where('slug', $slug)->exists()) {
            $slug = $baseSlug . '-' . $counter;
            $counter++;
        }
        
        // إنشاء المقال
        $blog = Blog::create([
            'admin_id' => $admin->id,
            'blog_category_id' => $category->id,
            'slug' => $slug,
            'show_homepage' => 1,
            'is_feature' => ($createdCount < 3) ? 1 : 0, // أول 3 مقالات كـ featured
            'status' => 1,
            'thumbnail_image' => 'uploads/website-images/default-blog.jpg',
            'image' => 'uploads/website-images/default-blog.jpg',
        ]);
        
        // إنشاء الترجمة العربية
        BlogTranslation::create([
            'blog_id' => $blog->id,
            'lang_code' => 'ar',
            'title' => $articleContent['title'],
            'sort_description' => $articleContent['sort_description'],
            'description' => $articleContent['description'],
            'seo_title' => $articleContent['title'],
            'seo_description' => $articleContent['sort_description'],
        ]);
        
        $createdCount++;
        echo "✓ تم إنشاء مقال: {$articleContent['title']}\n";
    }
    
    echo "\n✓ تم إنشاء {$createdCount} مقالة جديدة بنجاح!\n";
    echo "\n========================================\n";
    echo "اكتمل التحديث بنجاح!\n";
    echo "========================================\n";
    
} catch (Exception $e) {
    echo "✗ حدث خطأ: " . $e->getMessage() . "\n";
    echo "Stack trace: " . $e->getTraceAsString() . "\n";
    exit(1);
}
