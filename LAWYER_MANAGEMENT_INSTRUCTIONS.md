# تعليمات إدارة المحامين والأقسام والخدمات

## الفهرس:
1. [إدارة المحامين حسب الأقسام](#إدارة-المحامين-حسب-الأقسام)
2. [إدارة الأقسام والخدمات السورية](#إدارة-الأقسام-والخدمات-السورية)

---

# إدارة المحامين حسب الأقسام

## ما تم إنجازه:

1. ✅ **تعديل HomeController**: تم تعديل `app/Http/Controllers/HomeController.php` لعرض محامٍ واحد فقط لكل قسم في الصفحة الرئيسية (المحامي ذو أعلى تقييم).

2. ✅ **تعديل API Controller**: تم تعديل `app/Http/Controllers/API/AllPagesController.php` لعرض محامٍ واحد فقط لكل قسم في API.

3. ✅ **إنشاء سكربت الإدارة**: تم إنشاء `manage_lawyers_by_department.php` الذي يقوم بـ:
   - الاحتفاظ بمحامٍ واحد فقط لكل قسم (الأعلى تقييماً)
   - حذف باقي المحامين في كل قسم
   - إضافة صور للمحامين المتبقين
   - التأكد من اكتمال المعلومات (الهاتف، سنوات الخبرة، إلخ)
   - إضافة تقييمات افتراضية إذا لم تكن موجودة
   - إعادة تعيين كلمات المرور إلى قيم معروفة
   - إنشاء تقرير بجميع بيانات الدخول

## كيفية الاستخدام:

### 1. تشغيل السكربت في وضع التجربة (Dry-Run):
```bash
php manage_lawyers_by_department.php --dry-run
```
هذا سيعرض ما سيتم عمله بدون تطبيق أي تغييرات على قاعدة البيانات.

### 2. تشغيل السكربت الفعلي:
```bash
php manage_lawyers_by_department.php
```
⚠️ **تحذير**: هذا سيقوم بحذف المحامين الزائدين فعلياً!

## ما يفعله السكربت:

### لكل قسم:
1. يجد جميع المحامين في القسم
2. يختار المحامي ذو أعلى تقييم (أو الأول إذا لم تكن هناك تقييمات)
3. يحذف باقي المحامين في القسم
4. يضيف صورة للمحامي المتبقي إذا لم تكن موجودة
5. يضمن اكتمال المعلومات:
   - تأكيد البريد الإلكتروني
   - تفعيل الحساب
   - إظهاره في الصفحة الرئيسية
   - إضافة رقم هاتف إذا كان مفقوداً
   - إضافة سنوات الخبرة إذا كانت مفقودة
6. يضيف تقييماً افتراضياً (5 نجوم) إذا لم تكن هناك تقييمات
7. يعيد تعيين كلمة المرور إلى: `Lawyer{ID}!2024`

### التقارير:
السكربت ينشئ تقريرين:
1. **ملف نصي**: `storage/logs/lawyer_credentials_YYYY-MM-DD_HHMMSS.txt`
2. **ملف CSV**: `storage/logs/lawyer_credentials_YYYY-MM-DD_HHMMSS.csv`

التقارير تحتوي على:
- اسم القسم
- معرف المحامي
- الاسم
- البريد الإلكتروني
- كلمة المرور (المعاد تعيينها)
- رقم الهاتف
- مسار الصورة
- التقييم وعدد التقييمات
- سنوات الخبرة
- التخصصات
- الموقع

## ملاحظات مهمة:

1. **المحامين الذين لديهم مواعيد**: لن يتم حذفهم إذا كان لديهم مواعيد مرتبطة بهم.

2. **الصور**: السكربت يبحث عن صور في:
   - `uploads/website-images/lawyers/lawyer-{number}.jpg`
   - إذا لم توجد، يستخدم الصورة الافتراضية من الإعدادات
   - إذا لم توجد، يستخدم placeholder

3. **كلمات المرور**: يتم إعادة تعيين جميع كلمات المرور إلى نمط موحد: `Lawyer{ID}!2024`
   - مثال: للمحامي رقم 5 → `Lawyer5!2024`

4. **التقييمات**: إذا لم يكن للمحامي أي تقييمات، سيتم إضافة تقييم افتراضي 5 نجوم.

## بعد التشغيل:

1. تحقق من التقارير في `storage/logs/`
2. تأكد من أن الصفحة الرئيسية تعرض محامياً واحداً لكل قسم
3. استخدم بيانات الدخول من التقرير لتسجيل الدخول كأي محامي

## استعادة البيانات:

⚠️ **لا يوجد**: هذا السكربت يحذف البيانات بشكل دائم. تأكد من عمل نسخة احتياطية قبل التشغيل!

```bash
# عمل نسخة احتياطية من قاعدة البيانات
php artisan backup:run
# أو
mysqldump -u username -p database_name > backup.sql
```

---

# إدارة الأقسام والخدمات السورية

## ما تم إنجازه:

تم إنشاء سكربت `manage_departments_and_services_syria.php` الذي يقوم بـ:
- ✅ حذف جميع الأقسام والخدمات الحالية
- ✅ إضافة أهم الأقسام القانونية في سوريا (8 أقسام)
- ✅ إضافة أهم الخدمات القانونية في سوريا (7 خدمات)
- ✅ إضافة الترجمات العربية والإنجليزية لجميع الأقسام والخدمات

## الأقسام القانونية المضافة:

1. **القانون المدني** - Civil Law
2. **قانون الأحوال الشخصية** - Personal Status Law
3. **القانون التجاري** - Commercial Law
4. **القانون العقاري** - Real Estate Law
5. **القانون الجنائي** - Criminal Law
6. **قانون العمل** - Labor Law
7. **القانون الإداري** - Administrative Law
8. **القانون الضريبي** - Tax Law

## الخدمات القانونية المضافة:

1. **الاستشارات القانونية** - Legal Consultation
2. **صياغة العقود** - Contract Drafting
3. **التمثيل في المحاكم** - Court Representation
4. **تسجيل الشركات** - Company Registration
5. **حل النزاعات** - Dispute Resolution
6. **التحكيم** - Arbitration
7. **التوثيق القانوني** - Legal Documentation

## كيفية الاستخدام:

### 1. تشغيل السكربت في وضع التجربة (Dry-Run):
```bash
php manage_departments_and_services_syria.php --dry-run
```
هذا سيعرض ما سيتم عمله بدون تطبيق أي تغييرات على قاعدة البيانات.

### 2. تشغيل السكربت الفعلي:
```bash
php manage_departments_and_services_syria.php
```
⚠️ **تحذير**: هذا سيقوم بحذف جميع الأقسام والخدمات الحالية وإضافة الأقسام والخدمات الجديدة!

## ما يفعله السكربت:

### حذف الأقسام:
1. يحذف جميع الأقسام الموجودة
2. يحذف الترجمات والصور والفيديوهات المرتبطة
3. **لا يحذف الأقسام التي لديها محامين مرتبطين**

### حذف الخدمات:
1. يحذف جميع الخدمات الموجودة
2. يحذف الترجمات والصور والفيديوهات المرتبطة

### إضافة الأقسام الجديدة:
1. ينشئ 8 أقسام قانونية مهمة في سوريا
2. يضيف الترجمات العربية والإنجليزية لكل قسم
3. يضيف وصفاً تفصيلياً لكل قسم
4. يفعّل إظهار الأقسام في الصفحة الرئيسية

### إضافة الخدمات الجديدة:
1. ينشئ 7 خدمات قانونية مهمة في سوريا
2. يضيف الترجمات العربية والإنجليزية لكل خدمة
3. يضيف وصفاً تفصيلياً لكل خدمة
4. يفعّل إظهار الخدمات في الصفحة الرئيسية

## ملاحظات مهمة:

1. **الأقسام التي لديها محامين**: لن يتم حذفها إذا كان لديها محامين مرتبطين. يجب نقل المحامين أولاً أو حذفهم.

2. **الترجمات**: السكربت يضيف الترجمات لجميع اللغات النشطة في النظام. إذا كانت اللغة غير موجودة في البيانات، سيستخدم الترجمة العربية كبديل.

3. **الصور**: الأقسام تستخدم صور افتراضية من `uploads/website-images/dummy/`. يمكن تغييرها لاحقاً من لوحة التحكم.

4. **الأيقونات**: الخدمات تستخدم أيقونات Font Awesome. يمكن تغييرها لاحقاً.

## بعد التشغيل:

1. تحقق من أن الأقسام والخدمات الجديدة ظهرت في الموقع
2. راجع الترجمات وتأكد من صحتها
3. أضف صوراً مخصصة للأقسام إذا لزم الأمر
4. ربط المحامين بالأقسام المناسبة باستخدام سكربت إدارة المحامين

## استعادة البيانات:

⚠️ **لا يوجد**: هذا السكربت يحذف البيانات بشكل دائم. تأكد من عمل نسخة احتياطية قبل التشغيل!

```bash
# عمل نسخة احتياطية من قاعدة البيانات
php artisan backup:run
# أو
mysqldump -u username -p database_name > backup.sql
```

## ترتيب التشغيل الموصى به:

1. **أولاً**: تشغيل سكربت إدارة الأقسام والخدمات
   ```bash
   php manage_departments_and_services_syria.php
   ```

2. **ثانياً**: تشغيل سكربت إدارة المحامين
   ```bash
   php manage_lawyers_by_department.php
   ```

هذا يضمن أن المحامين سيتم ربطهم بالأقسام الجديدة الصحيحة.
